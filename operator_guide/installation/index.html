
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A minimal cloud aimed at small and edge deployments">
      
      
      
        <link rel="canonical" href="https://shakenfist.com/operator_guide/installation/">
      
      
        <link rel="prev" href="../../developer_guide/workflow/">
      
      
        <link rel="next" href="../artifacts/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.1, mkdocs-material-9.1.21">
    
    
      
        <title>Installation - Shaken Fist</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installing-shaken-fist" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Shaken Fist" class="md-header__button md-logo" aria-label="Shaken Fist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Shaken Fist
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/shakenfist/shakenfist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Shaken Fist" class="md-nav__button md-logo" aria-label="Shaken Fist" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Shaken Fist
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/shakenfist/shakenfist" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../manifesto/" class="md-nav__link">
        Manifesto
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../features/" class="md-nav__link">
        Features
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        Community
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/affinity/" class="md-nav__link">
        Affinity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/consoles/" class="md-nav__link">
        Consoles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/objects/" class="md-nav__link">
        Objects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/metadata/" class="md-nav__link">
        Object Metadata
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Developer Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
      
        <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          API reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          API reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/admin/" class="md-nav__link">
        Admin (/admin/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/artifacts/" class="md-nav__link">
        Artifacts (/artifacts/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/authentication/" class="md-nav__link">
        Authentication (/auth/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/blob_checksums/" class="md-nav__link">
        Blob Checksums (/blob_checksums/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/blobs/" class="md-nav__link">
        Blobs (/blobs/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/instances/" class="md-nav__link">
        Instances (/instances/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/label/" class="md-nav__link">
        Label (/label/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/networks/" class="md-nav__link">
        Networks (/networks/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/interfaces/" class="md-nav__link">
        Network Interfaces (/interfaces/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/nodes/" class="md-nav__link">
        Nodes (/nodes/)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/api_reference/upload/" class="md-nav__link">
        Upload (/upload/)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/ci_api_coverage/" class="md-nav__link">
        CI API coverage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/release_process/" class="md-nav__link">
        Release process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/standards/" class="md-nav__link">
        Standards
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/state_machine/" class="md-nav__link">
        State machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/updating_docs/" class="md-nav__link">
        Updating docs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_guide/workflow/" class="md-nav__link">
        Workflow
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Operator Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Operator Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Installation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-configuration-for-a-multi-node-deploy" class="md-nav__link">
    Sample configuration for a multi-node deploy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-for-multi-node-installations" class="md-nav__link">
    Notes for multi-node installations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#your-first-instance" class="md-nav__link">
    Your first instance
  </a>
  
    <nav class="md-nav" aria-label="Your first instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-caveats" class="md-nav__link">
    Other caveats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-variables" class="md-nav__link">
    Deployment variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../artifacts/" class="md-nav__link">
        Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../locks/" class="md-nav__link">
        Locks
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5" >
      
      
      
        <label class="md-nav__link" for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
          Networking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../networking/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../networking/single_instance/" class="md-nav__link">
        Single Instance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../power_states/" class="md-nav__link">
        Power States
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrades/" class="md-nav__link">
        Upgrades
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-configuration-for-a-multi-node-deploy" class="md-nav__link">
    Sample configuration for a multi-node deploy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notes-for-multi-node-installations" class="md-nav__link">
    Notes for multi-node installations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#your-first-instance" class="md-nav__link">
    Your first instance
  </a>
  
    <nav class="md-nav" aria-label="Your first instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-caveats" class="md-nav__link">
    Other caveats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deployment-variables" class="md-nav__link">
    Deployment variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installing-shaken-fist">Installing Shaken Fist</h1>
<p>The purpose of this guide is to walk you through a Shaken Fist installation. Shaken Fist will work just fine on a single machine, although its also happy to run on clusters of machines. We'll discuss the general guidance for install options as we go.</p>
<p>Shaken Fist only supports Ubuntu 20.04, Debian 10, and Debian 11, so if you're running on localhost that implies that you must be running a recent Ubuntu or Debian on your development machine. Note as well that the deployer installs software and changes the configuration of your networking, so be careful when running it on machines you are fond of. This documentation was most recently tested against Debian 11, in November 2021. Bug reports are welcome if you have any issues, and may be filed at <a href="https://github.com/shakenfist/shakenfist/issues">https://github.com/shakenfist/shakenfist/issues</a></p>
<p>Each machine in the cluster should match this description:</p>
<ul>
<li>Have virtualization extensions enabled in the BIOS.</li>
<li>Have jumbo frames enabled on the switch for the "mesh interface" for installations of more than one machine. Shaken Fist can optionally run internal traffic such as etcd and virtual network meshes on a separate interface to traffic egressing the cluster. Whichever interface you specify as being used for virtual network mesh traffic must have jumbo frames enabled for the virtual networks to function correctly.</li>
<li>Have at least 1 gigabit connectivity on the "mesh interface". This is a requirement of etcd.</li>
<li>Have a cloudadmin account setup with passwordless sudo, and a ssh key in its authorized_keys file. This is an ansible requirement, although the exact username is configurable in the SSH_USER variable.</li>
</ul>
<p>We now have a fancy helper to help you install your first localhost cluster, so let's give that a go:</p>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>https://raw.githubusercontent.com/shakenfist/shakenfist/develop/deploy/getsf<span class="w"> </span>-o<span class="w"> </span>getsf
chmod<span class="w"> </span>ugo+rx<span class="w"> </span>getsf
sudo<span class="w"> </span>./getsf
</code></pre></div>
<p>This script will then walk you through the installation steps, asking questions as you go. The script leaves you with an installer configuration at <code>/root/sf-deploy</code>, which is the basis for later upgrades and cluster expansions.</p>
<p>You can script the answers to <code>getsf</code> by setting environment variables. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">GETSF_FLOATING_BLOCK</span><span class="o">=</span><span class="m">192</span>.168.10.0/24
<span class="nb">export</span><span class="w"> </span><span class="nv">GETSF_DEPLOY_NAME</span><span class="o">=</span>bonkerslab
<span class="nb">export</span><span class="w"> </span><span class="nv">GETSF_RELEASE</span><span class="o">=</span>pre-release
<span class="nb">export</span><span class="w"> </span><span class="nv">GETSF_NODES</span><span class="o">=</span>localhost
<span class="nb">export</span><span class="w"> </span><span class="nv">GETSF_WARNING</span><span class="o">=</span>yes
sudo<span class="w"> </span>--preserve-env<span class="w"> </span>./getsf
</code></pre></div>
<h2 id="sample-configuration-for-a-multi-node-deploy">Sample configuration for a multi-node deploy</h2>
<p>However, if you're performing a multinode deploy, the process is currently much more manual. The intent is to expand <code>getsf</code> to handle multiple nodes, but that work is not yet complete.</p>
<p>For now, you'll need to write a configuration file a bit like this on the primary node:</p>
<div class="highlight"><pre><span></span><code>export ADMIN_PASSWORD=engeeF1o
export FLOATING_IP_BLOCK=&quot;192.168.10.0/24&quot;
export DEPLOY_NAME=&quot;bonkerslab&quot;
export SSH_USER=&quot;cloudadmin&quot;
export SSH_KEY_FILENAME=&quot;/root/.ssh/id_rsa&quot;

export KSM_ENABLED=1

# Topology is in JSON
read -r -d &#39;&#39; TOPOLOGY &lt;&lt;&#39;EOF&#39;
[
  {
    &quot;name&quot;: &quot;sf-primary&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.50&quot;,
    &quot;node_egress_nic&quot;: &quot;enp0s31f6&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.50&quot;,
    &quot;node_mesh_nic&quot;: &quot;enp0s31f6:1&quot;,
    &quot;primary_node&quot;: true,
    &quot;api_url&quot;: &quot;https://...your...install...here.com/api&quot;
  },
  {
    &quot;name&quot;: &quot;sf-1&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.51&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.51&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;network_node&quot;: true,
    &quot;hypervisor&quot;: true
  },
  {
    &quot;name&quot;: &quot;sf-2&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.52&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.52&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;hypervisor&quot;: true
  },
  {
    &quot;name&quot;: &quot;sf-3&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.53&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.53&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;hypervisor&quot;: true
  },
]
EOF
export TOPOLOGY

/srv/shakenfist/venv/share/shakenfist/installer/install
</code></pre></div>
<h2 id="notes-for-multi-node-installations">Notes for multi-node installations</h2>
<p>Not every node needs to be an etcd_master. I'd select three in most situations. One node must be marked as the primary node, and one must be marked as the network node. It is not currently supported having more than one of each of those node types.</p>
<ul>
<li>The primary node runs an apache load balancer across the API servers in the cluster, and therefore needs to be accessable to your users on HTTP and HTTPS.</li>
<li>The network node is the ingress and egress point for all virtual networks, and is where floating IPs live, so it needs to be setup as the gateway fro your floating IP block.</li>
</ul>
<p>Some of the considerations here can be subtle. Please reach out if you need a hand.</p>
<p>For a node complicated installation, <code>sf-deploy</code> might like this:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash

export ADMIN_PASSWORD=engeeF1o
export FLOATING_IP_BLOCK=&quot;192.168.10.0/24&quot;
export DEPLOY_NAME=&quot;bonkerslab&quot;
export SSH_USER=&quot;cloudadmin&quot;
export SSH_KEY_FILENAME=&quot;/root/.ssh/id_rsa&quot;

export KSM_ENABLED=1

# Topology is in JSON
read -r -d &#39;&#39; TOPOLOGY &lt;&lt;&#39;EOF&#39;
[
  {
    &quot;name&quot;: &quot;sf-primary&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.50&quot;,
    &quot;node_egress_nic&quot;: &quot;enp0s31f6&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.50&quot;,
    &quot;node_mesh_nic&quot;: &quot;enp0s31f6:1&quot;,
    &quot;primary_node&quot;: true,
    &quot;api_url&quot;: &quot;https://...your...install...here.com/api&quot;
  },
  {
    &quot;name&quot;: &quot;sf-1&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.51&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.51&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;network_node&quot;: true,
    &quot;hypervisor&quot;: true
  },
  {
    &quot;name&quot;: &quot;sf-2&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.52&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.52&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;hypervisor&quot;: true
  },
  {
    &quot;name&quot;: &quot;sf-3&quot;,
    &quot;node_egress_ip&quot;: &quot;192.168.1.53&quot;,
    &quot;node_egress_nic&quot;: &quot;enp5s0&quot;,
    &quot;node_mesh_ip&quot;: &quot;192.168.21.53&quot;,
    &quot;node_mesh_nic&quot;: &quot;eno1&quot;,
    &quot;etcd_master&quot;: true,
    &quot;hypervisor&quot;: true
  },
]
EOF
export TOPOLOGY

/srv/shakenfist/venv/share/shakenfist/installer/install
</code></pre></div>
<h2 id="your-first-instance">Your first instance</h2>
<p>Before you can start your first instance you'll need to authenticate to Shaken Fist, and create a network. Shaken Fist's python api client (as used by the command line client) looks for authentication details in the following locations:</p>
<ul>
<li>Command line flags</li>
<li>Environment variables (prefixed with <strong>SHAKENFIST_</strong>)</li>
<li><strong>~/.shakenfist</strong>, a JSON formatted configuration file</li>
<li><strong>/etc/sf/shakenfist.json</strong>, the same file as above, but global</li>
</ul>
<p>By default the installer creates <strong>/etc/sf/sfrc</strong>, which sets the required environment variables to authenticate.
It is customized per installation, setting the following variables:</p>
<ul>
<li><strong>SHAKENFIST_NAMESPACE</strong>, the namespace to create resources in</li>
<li><strong>SHAKENFIST_KEY</strong>, an authentication key for that namespace</li>
<li><strong>SHAKENFIST_API_URL</strong>, a URL to the Shaken Fist API server</li>
</ul>
<p>Before interacting with Shaken Fist, we need to source the rc file.</p>
<div class="highlight"><pre><span></span><code>.<span class="w"> </span>/etc/sf/sfrc
</code></pre></div>
<p>Instances must be launched attached to a network.</p>
<p>Create your first network:
<div class="highlight"><pre><span></span><code>sf-client<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>mynet<span class="w"> </span><span class="m">192</span>.168.42.0/24
</code></pre></div></p>
<p>You can get help for the command line client by running <code>`sf-client --help</code>. The above command creates a new network called "mynet", with the IP block 192.168.42.0/24. You will receive some descriptive output back:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sf-client<span class="w"> </span>network<span class="w"> </span>create<span class="w"> </span>mynet<span class="w"> </span><span class="m">192</span>.168.42.0/24
uuid<span class="w">            </span>:<span class="w"> </span>16baa325-5adf-473f-8e7a-75710a822d45
name<span class="w">            </span>:<span class="w"> </span>mynet
vxlan<span class="w"> </span>id<span class="w">        </span>:<span class="w"> </span><span class="m">2</span>
netblock<span class="w">        </span>:<span class="w"> </span><span class="m">192</span>.168.42.0/24
provide<span class="w"> </span>dhcp<span class="w">    </span>:<span class="w"> </span>True
provide<span class="w"> </span>nat<span class="w">     </span>:<span class="w"> </span>True
floating<span class="w"> </span>gateway:<span class="w"> </span>None
namespace<span class="w">       </span>:<span class="w"> </span>system
state<span class="w">           </span>:<span class="w"> </span>initial

Metadata:
</code></pre></div>
<p>The UUID is important, as that is how we will refer to the network elsewhere. Let's now create a simple first instance (you'll need to change this to use your actual network UUID):</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>sf-client<span class="w"> </span>instance<span class="w"> </span>create<span class="w"> </span>myvm<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span>-d<span class="w"> </span><span class="m">8</span>@cirros<span class="w"> </span>-n<span class="w"> </span>16baa325-5adf-473f-8e7a-75710a822d45
uuid<span class="w">        </span>:<span class="w"> </span>c6c4ba94-ed34-497d-8964-c223489dee3e
name<span class="w">        </span>:<span class="w"> </span>myvm
namespace<span class="w">   </span>:<span class="w"> </span>system
cpus<span class="w">        </span>:<span class="w"> </span><span class="m">1</span>
memory<span class="w">      </span>:<span class="w"> </span><span class="m">1024</span>
disk<span class="w"> </span>spec<span class="w">   </span>:<span class="w"> </span><span class="nv">type</span><span class="o">=</span>disk<span class="w">   </span><span class="nv">bus</span><span class="o">=</span>None<span class="w">  </span><span class="nv">size</span><span class="o">=</span><span class="m">8</span><span class="w">   </span><span class="nv">base</span><span class="o">=</span>cirros
video<span class="w">       </span>:<span class="w"> </span><span class="nv">model</span><span class="o">=</span>cirrus<span class="w">  </span><span class="nv">memory</span><span class="o">=</span><span class="m">16384</span>
node<span class="w">        </span>:<span class="w"> </span>marvin
power<span class="w"> </span>state<span class="w"> </span>:<span class="w"> </span>on
state<span class="w">       </span>:<span class="w"> </span>created
console<span class="w"> </span>port:<span class="w"> </span><span class="m">31839</span>
vdi<span class="w"> </span>port<span class="w">    </span>:<span class="w"> </span><span class="m">34442</span>

ssh<span class="w"> </span>key<span class="w">     </span>:<span class="w"> </span>None
user<span class="w"> </span>data<span class="w">   </span>:<span class="w"> </span>None

Metadata:

Interfaces:

<span class="w">    </span>uuid<span class="w">    </span>:<span class="w"> </span>e56b3c7b-8056-4645-b5b5-1779721ff21d
<span class="w">    </span>network<span class="w"> </span>:<span class="w"> </span>16baa325-5adf-473f-8e7a-75710a822d45
<span class="w">    </span>macaddr<span class="w"> </span>:<span class="w"> </span>ae:15:4d:9c:d8:c0
<span class="w">    </span>order<span class="w">   </span>:<span class="w"> </span><span class="m">0</span>
<span class="w">    </span>ipv4<span class="w">    </span>:<span class="w"> </span><span class="m">192</span>.168.42.76
<span class="w">    </span>floating:<span class="w"> </span>None
<span class="w">    </span>model<span class="w">   </span>:<span class="w"> </span>virtio
</code></pre></div>
<p>Probably the easiest way to interact with this instance is to connect to its console port, which is the serial console of the instance over telnet. In the case above, that is available on port 31829 on localhost (my laptop is called marvin).</p>
<h3 id="other-caveats">Other caveats</h3>
<p>The installer will also enforce the following sanity checks:</p>
<ul>
<li>That KVM will operate on your machines. This is generally fine unless you're using virtual machines at which point nested virtualization needs to be enabled.</li>
<li>That your network interface MTU is greater than 2,000 bytes. This is required because the VXLAN mesh our virtual networks use add overhead to packets and a standard MTU of 1500 bytes for the physical network will result in packets being fragmented too frequently on the virtual networks. You can set a higher MTU if you desire, I generally select 9,000 bytes.</li>
</ul>
<h3 id="deployment-variables">Deployment variables</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADMIN_PASSWORD</td>
<td>The admin password for the cloud once installed</td>
</tr>
<tr>
<td>DNS_SERVER</td>
<td>The DNS server to configure instances with via DHCP. Defaults to 8.8.8.8</td>
</tr>
<tr>
<td>HTTP_PROXY</td>
<td>A URL for a HTTP proxy to use for image downloads. For example <a href="http://localhost:3128">http://localhost:3128</a></td>
</tr>
<tr>
<td>INCLUDE_TRACEBACKS</td>
<td>Whether to include tracebacks in server 500 errors. Never set this to true in production!</td>
</tr>
<tr>
<td>FLOATING_IP_BLOCK</td>
<td>The IP range to use for the floating network</td>
</tr>
<tr>
<td>KSM_ENABLED</td>
<td>Set to 1 to enable KSM, 0 to disable</td>
</tr>
<tr>
<td>DEPLOY_NAME</td>
<td>The name of the deployment to use as an external label for prometheus</td>
</tr>
<tr>
<td>TOPOLOGY</td>
<td>The topology of the cluster, as described above</td>
</tr>
<tr>
<td>SSH_KEY_FILENAME</td>
<td>The path to a ssh private key file to use for authentication. It is assumed that the public key is at <code>${SSH_KEY_FILENAME}.pub</code>.</td>
</tr>
<tr>
<td>SSH_USER</td>
<td>The username to ssh as.</td>
</tr>
</tbody>
</table>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>